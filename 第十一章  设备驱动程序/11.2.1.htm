<html xmlns:v="urn:schemas-microsoft-com:vml"
xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns:st1="urn:schemas-microsoft-com:office:smarttags"
xmlns="http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=Content-Type content="text/html; charset=gb2312">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 11">
<meta name=Originator content="Microsoft Word 11">
<link rel=File-List href="11.2.1.files/filelist.xml">
<link rel=Edit-Time-Data href="11.2.1.files/editdata.mso">
<!--[if !mso]>
<style>
v\:* {behavior:url(#default#VML);}
o\:* {behavior:url(#default#VML);}
w\:* {behavior:url(#default#VML);}
.shape {behavior:url(#default#VML);}
</style>
<![endif]-->
<title> I/O端口</title>
<o:SmartTagType namespaceuri="urn:schemas-microsoft-com:office:smarttags"
 name="chsdate" downloadurl=""/>
<!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>CLJ</o:Author>
  <o:Template>Normal</o:Template>
  <o:LastAuthor>CLJ</o:LastAuthor>
  <o:Revision>2</o:Revision>
  <o:TotalTime>0</o:TotalTime>
  <o:Created>2007-08-17T03:50:00Z</o:Created>
  <o:LastSaved>2007-08-17T03:50:00Z</o:LastSaved>
  <o:Pages>1</o:Pages>
  <o:Words>247</o:Words>
  <o:Characters>1414</o:Characters>
  <o:Lines>11</o:Lines>
  <o:Paragraphs>3</o:Paragraphs>
  <o:CharactersWithSpaces>1658</o:CharactersWithSpaces>
  <o:Version>11.5606</o:Version>
 </o:DocumentProperties>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:GrammarState>Clean</w:GrammarState>
  <w:PunctuationKerning/>
  <w:DrawingGridVerticalSpacing>7.8 磅</w:DrawingGridVerticalSpacing>
  <w:DisplayHorizontalDrawingGridEvery>0</w:DisplayHorizontalDrawingGridEvery>
  <w:DisplayVerticalDrawingGridEvery>2</w:DisplayVerticalDrawingGridEvery>
  <w:ValidateAgainstSchemas/>
  <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>
  <w:IgnoreMixedContent>false</w:IgnoreMixedContent>
  <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>
  <w:Compatibility>
   <w:SpaceForUL/>
   <w:BalanceSingleByteDoubleByteWidth/>
   <w:DoNotLeaveBackslashAlone/>
   <w:ULTrailSpace/>
   <w:DoNotExpandShiftReturn/>
   <w:AdjustLineHeightInTable/>
   <w:BreakWrappedTables/>
   <w:SnapToGridInCell/>
   <w:WrapTextWithPunct/>
   <w:UseAsianBreakRules/>
   <w:DontGrowAutofit/>
   <w:UseFELayout/>
  </w:Compatibility>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
 </w:WordDocument>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:LatentStyles DefLockedState="false" LatentStyleCount="156">
 </w:LatentStyles>
</xml><![endif]--><!--[if !mso]><object
 classid="clsid:38481807-CA0E-42D2-BF39-B33AF135CC4D" id=ieooui></object>
<style>
st1\:*{behavior:url(#ieooui) }
</style>
<![endif]-->
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;
	mso-font-charset:2;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:0 268435456 0 0 -2147483648 0;}
@font-face
	{font-family:宋体;
	panose-1:2 1 6 0 3 1 1 1 1 1;
	mso-font-alt:SimSun;
	mso-font-charset:134;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:3 135135232 16 0 262145 0;}
@font-face
	{font-family:"\@宋体";
	panose-1:2 1 6 0 3 1 1 1 1 1;
	mso-font-charset:134;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:3 135135232 16 0 262145 0;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-parent:"";
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	mso-pagination:none;
	font-size:12.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:宋体;
	mso-hansi-font-family:"Times New Roman";
	mso-bidi-font-family:"Times New Roman";
	color:black;
	mso-font-kerning:1.0pt;
	font-weight:bold;
	mso-bidi-font-weight:normal;}
span.GramE
	{mso-style-name:"";
	mso-gram-e:yes;}
 /* Page Definitions */
 @page
	{mso-page-border-surround-header:no;
	mso-page-border-surround-footer:no;}
@page Section1
	{size:595.3pt 841.9pt;
	margin:72.0pt 90.0pt 72.0pt 90.0pt;
	mso-header-margin:42.55pt;
	mso-footer-margin:49.6pt;
	mso-paper-source:0;
	layout-grid:15.6pt;}
div.Section1
	{page:Section1;}
 /* List Definitions */
 @list l0
	{mso-list-id:940602728;
	mso-list-type:simple;
	mso-list-template-ids:1937021516;}
@list l0:level1
	{mso-level-number-format:bullet;
	mso-level-text:・;
	mso-level-tab-stop:21.25pt;
	mso-level-number-position:left;
	margin-left:21.25pt;
	text-indent:-21.25pt;
	font-family:宋体;
	mso-hansi-font-family:Wingdings;}
@list l1
	{mso-list-id:1296181145;
	mso-list-type:simple;
	mso-list-template-ids:1937021516;}
@list l1:level1
	{mso-level-number-format:bullet;
	mso-level-text:・;
	mso-level-tab-stop:21.25pt;
	mso-level-number-position:left;
	margin-left:21.25pt;
	text-indent:-21.25pt;
	font-family:宋体;
	mso-hansi-font-family:Wingdings;}
@list l2
	{mso-list-id:1687318853;
	mso-list-type:simple;
	mso-list-template-ids:1937021516;}
@list l2:level1
	{mso-level-number-format:bullet;
	mso-level-text:・;
	mso-level-tab-stop:21.25pt;
	mso-level-number-position:left;
	margin-left:21.25pt;
	text-indent:-21.25pt;
	font-family:宋体;
	mso-hansi-font-family:Wingdings;}
@list l3
	{mso-list-id:1965425969;
	mso-list-type:simple;
	mso-list-template-ids:1937021516;}
@list l3:level1
	{mso-level-number-format:bullet;
	mso-level-text:・;
	mso-level-tab-stop:21.25pt;
	mso-level-number-position:left;
	margin-left:21.25pt;
	text-indent:-21.25pt;
	font-family:宋体;
	mso-hansi-font-family:Wingdings;}
@list l4
	{mso-list-id:2003511091;
	mso-list-type:simple;
	mso-list-template-ids:1937021516;}
@list l4:level1
	{mso-level-number-format:bullet;
	mso-level-text:・;
	mso-level-tab-stop:21.25pt;
	mso-level-number-position:left;
	margin-left:21.25pt;
	text-indent:-21.25pt;
	font-family:宋体;
	mso-hansi-font-family:Wingdings;}
@list l5
	{mso-list-id:2016767362;
	mso-list-type:simple;
	mso-list-template-ids:1937021516;}
@list l5:level1
	{mso-level-number-format:bullet;
	mso-level-text:・;
	mso-level-tab-stop:21.25pt;
	mso-level-number-position:left;
	margin-left:21.25pt;
	text-indent:-21.25pt;
	font-family:宋体;
	mso-hansi-font-family:Wingdings;}
ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style>
<!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:普通表格;
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-parent:"";
	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
	mso-para-margin:0cm;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman";
	mso-ansi-language:#0400;
	mso-fareast-language:#0400;
	mso-bidi-language:#0400;}
</style>
<![endif]--><!--[if gte mso 9]><xml>
 <o:shapedefaults v:ext="edit" spidmax="2050"/>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <o:shapelayout v:ext="edit">
  <o:idmap v:ext="edit" data="1"/>
 </o:shapelayout></xml><![endif]-->
</head>

<body lang=ZH-CN style='tab-interval:21.0pt;text-justify-trim:punctuation'>

<div class=Section1 style='layout-grid:15.6pt'>

<p class=MsoNormal><st1:chsdate Year="1899" Month="12" Day="30"
IsLunarDate="False" IsROCDate="False" w:st="on"><span lang=EN-US
 style='font-size:10.5pt;mso-bidi-font-size:10.0pt'>11.2.1</span></st1:chsdate><span
lang=EN-US style='font-size:10.5pt;mso-bidi-font-size:10.0pt'> I/O</span><span
style='font-size:10.5pt;mso-bidi-font-size:10.0pt'>端口<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-indent:21.25pt'><span style='font-size:10.5pt;
mso-bidi-font-size:10.0pt;font-weight:normal'>每个连接到<span lang=EN-US>I/O</span>总线上的设备都有自己的<span
lang=EN-US>I/O</span>地址集，即所谓的<span lang=EN-US>I/O</span>端口（<span lang=EN-US>I/O
port</span>）。在<span lang=EN-US>IBM PC</span>体系结构中，<span lang=EN-US>I/O</span>地址空间一共提供了<span
lang=EN-US>65,536</span>个<span lang=EN-US>8</span>位的<span lang=EN-US>I/O</span>端口。可以把两个连续的<span
lang=EN-US>8</span>位端口看成一个<span lang=EN-US>16</span>位端口，但是这必须是从偶数地址开始。同理，也可以把两个连续的<span
lang=EN-US>16</span>位端口看成一个<span lang=EN-US>32</span>位端口，但是这必须是从<span
lang=EN-US>4</span>的整数<span class=GramE>倍</span>地址开始。有四条专用的汇编语言指令可以允许<span
lang=EN-US>CPU</span>对<span lang=EN-US>I/O</span>端口进行读写：它们分别是<span lang=EN-US>in</span>、<span
lang=EN-US>ins</span>、<span lang=EN-US>out</span>和<span lang=EN-US>outs</span>。在执行其中的一条指令时，<span
lang=EN-US>CPU</span>使用地址总线选择所请求的<span lang=EN-US>I/O</span>端口，使用数据总线在<span
lang=EN-US>CPU</span>寄存器和端口之间传送数据。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-indent:21.25pt'><span lang=EN-US
style='font-size:10.5pt;mso-bidi-font-size:10.0pt;font-weight:normal'>I/O</span><span
style='font-size:10.5pt;mso-bidi-font-size:10.0pt;font-weight:normal'>端口还可以被映射到物理地址空间：因此，处理器和<span
lang=EN-US>I/O</span>设备之间的通信就可以直接使用对内存进行操作的汇编语言指令（例如，<span lang=EN-US>mov</span>、<span
lang=EN-US>and</span>、<span lang=EN-US>or</span>等等）。现代的硬件设备更倾向于映射<span
lang=EN-US>I/O</span>，因为这样处理的速度较快，并可以和<span lang=EN-US>DMA</span>结合起来使用。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-indent:21.25pt'><span style='font-size:10.5pt;
mso-bidi-font-size:10.0pt;font-weight:normal'>系统设计者的主要目的是提供对<span lang=EN-US>I/O</span>编程的统一方法，但又不牺牲性能。为了达到这个目的，每个设备的<span
lang=EN-US>I/O </span>端口都被组织成如图<span lang=EN-US>11.4</span>所示的一组专用寄存器。<span
lang=EN-US>CPU</span>把要发给设备的命令写入控制寄存器（<span lang=EN-US>control register</span>），并从状态寄存器（<span
lang=EN-US>status register</span>）中读出表示设备内部状态的值。<span lang=EN-US>CPU</span>还可以通过读取输入寄存器（<span
lang=EN-US>input register</span>）的内容从设备取得数据，也可以通过向输出寄存器（<span lang=EN-US>output
register</span>）中写入字节而把数据输出到设备。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><!--[if gte vml 1]><o:wrapblock><v:rect id="_x0000_s1026"
  style='position:absolute;left:0;text-align:left;margin-left:163.1pt;
  margin-top:0;width:69.9pt;height:26.1pt;z-index:1' o:allowincell="f">
  <v:textbox style='mso-next-textbox:#_x0000_s1026'>
   <![if !mso]>
   <table cellpadding=0 cellspacing=0 width="100%">
    <tr>
     <td><![endif]>
     <div>
     <p class=MsoNormal><span style='font-size:10.5pt;mso-bidi-font-size:10.0pt;
     font-weight:normal'>控制寄存器<span lang=EN-US><o:p></o:p></span></span></p>
     </div>
     <![if !mso]></td>
    </tr>
   </table>
   <![endif]></v:textbox>
  <w:wrap type="topAndBottom"/>
 </v:rect><v:rect id="_x0000_s1030" style='position:absolute;left:0;
  text-align:left;margin-left:69.9pt;margin-top:0;width:46.6pt;height:130.5pt;
  z-index:5' o:allowincell="f">
  <v:textbox>
   <![if !mso]>
   <table cellpadding=0 cellspacing=0 width="100%">
    <tr>
     <td><![endif]>
     <div>
     <p class=MsoNormal><span lang=EN-US style='font-size:10.5pt;mso-bidi-font-size:
     10.0pt;font-weight:normal'><span style='mso-spacerun:yes'>&nbsp;</span><o:p></o:p></span></p>
     <p class=MsoNormal><span lang=EN-US style='font-size:10.5pt;mso-bidi-font-size:
     10.0pt;font-weight:normal'><o:p>&nbsp;</o:p></span></p>
     <p class=MsoNormal><span lang=EN-US style='font-size:10.5pt;mso-bidi-font-size:
     10.0pt;font-weight:normal'><span style='mso-spacerun:yes'>&nbsp;</span>C<o:p></o:p></span></p>
     <p class=MsoNormal><span lang=EN-US style='font-size:10.5pt;mso-bidi-font-size:
     10.0pt;font-weight:normal'><span style='mso-spacerun:yes'>&nbsp;</span>P<o:p></o:p></span></p>
     <p class=MsoNormal><span lang=EN-US style='font-size:10.5pt;mso-bidi-font-size:
     10.0pt;font-weight:normal'><span style='mso-spacerun:yes'>&nbsp;</span>U<o:p></o:p></span></p>
     </div>
     <![if !mso]></td>
    </tr>
   </table>
   <![endif]></v:textbox>
  <w:wrap type="topAndBottom"/>
 </v:rect><v:rect id="_x0000_s1031" style='position:absolute;left:0;
  text-align:left;margin-left:267.95pt;margin-top:0;width:46.6pt;height:130.5pt;
  z-index:6' o:allowincell="f">
  <v:textbox>
   <![if !mso]>
   <table cellpadding=0 cellspacing=0 width="100%">
    <tr>
     <td><![endif]>
     <div>
     <p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
     <p class=MsoNormal><span style='font-size:10.5pt;mso-bidi-font-size:10.0pt;
     font-weight:normal'>设备<span lang=EN-US><o:p></o:p></span></span></p>
     <p class=MsoNormal><span lang=EN-US style='font-size:10.5pt;mso-bidi-font-size:
     10.0pt;font-weight:normal'>I/O<o:p></o:p></span></p>
     <p class=MsoNormal><span style='font-size:10.5pt;mso-bidi-font-size:10.0pt;
     font-weight:normal'>接口<span lang=EN-US><o:p></o:p></span></span></p>
     </div>
     <![if !mso]></td>
    </tr>
   </table>
   <![endif]></v:textbox>
  <w:wrap type="topAndBottom"/>
 </v:rect><v:line id="_x0000_s1032" style='position:absolute;left:0;
  text-align:left;z-index:7' from="116.5pt,0" to="163.1pt,0" o:allowincell="f">
  <v:stroke endarrow="block"/>
  <w:wrap type="topAndBottom"/>
 </v:line><v:line id="_x0000_s1033" style='position:absolute;left:0;
  text-align:left;flip:x;z-index:8' from="116.5pt,0" to="163.1pt,0"
  o:allowincell="f">
  <v:stroke endarrow="block"/>
  <w:wrap type="topAndBottom"/>
 </v:line><v:line id="_x0000_s1034" style='position:absolute;left:0;
  text-align:left;flip:x;z-index:9' from="116.5pt,0" to="163.1pt,0"
  o:allowincell="f">
  <v:stroke endarrow="block"/>
  <w:wrap type="topAndBottom"/>
 </v:line><v:line id="_x0000_s1035" style='position:absolute;left:0;
  text-align:left;z-index:10' from="116.5pt,0" to="163.1pt,0" o:allowincell="f">
  <v:stroke endarrow="block"/>
  <w:wrap type="topAndBottom"/>
 </v:line><v:line id="_x0000_s1036" style='position:absolute;left:0;
  text-align:left;z-index:11' from="233pt,0" to="267.95pt,0" o:allowincell="f">
  <v:stroke endarrow="block"/>
  <w:wrap type="topAndBottom"/>
 </v:line><v:line id="_x0000_s1037" style='position:absolute;left:0;
  text-align:left;flip:x;z-index:12' from="233pt,0" to="267.95pt,0"
  o:allowincell="f">
  <v:stroke endarrow="block"/>
  <w:wrap type="topAndBottom"/>
 </v:line><v:line id="_x0000_s1038" style='position:absolute;left:0;
  text-align:left;flip:x;z-index:13' from="233pt,0" to="267.95pt,0"
  o:allowincell="f">
  <v:stroke endarrow="block"/>
  <w:wrap type="topAndBottom"/>
 </v:line><v:line id="_x0000_s1039" style='position:absolute;left:0;
  text-align:left;z-index:14' from="233pt,0" to="267.95pt,0" o:allowincell="f">
  <v:stroke endarrow="block"/>
  <w:wrap type="topAndBottom"/>
 </v:line><![endif]--><![if !vml]><span style='mso-ignore:vglayout'>
 <table cellpadding=0 cellspacing=0 align=left>
  <tr>
   <td width=92 height=0></td>
  </tr>
  <tr>
   <td></td>
   <td><img width=332 height=183 src="11.2.1.files/image001.gif" v:shapes="_x0000_s1026 _x0000_s1030 _x0000_s1031 _x0000_s1032 _x0000_s1033 _x0000_s1034 _x0000_s1035 _x0000_s1036 _x0000_s1037 _x0000_s1038 _x0000_s1039"></td>
  </tr>
 </table>
 </span><![endif]><!--[if gte vml 1]></o:wrapblock><![endif]--><br
style='mso-ignore:vglayout' clear=ALL>
<span lang=EN-US style='font-size:10.5pt;mso-bidi-font-size:10.0pt;font-weight:
normal'><o:p></o:p></span></p>

<p class=MsoNormal><!--[if gte vml 1]><o:wrapblock><v:rect id="_x0000_s1027"
  style='position:absolute;left:0;text-align:left;margin-left:163.1pt;
  margin-top:0;width:69.9pt;height:26.1pt;z-index:2' o:allowincell="f">
  <v:textbox>
   <![if !mso]>
   <table cellpadding=0 cellspacing=0 width="100%">
    <tr>
     <td><![endif]>
     <div>
     <p class=MsoNormal><span style='font-size:10.5pt;mso-bidi-font-size:10.0pt;
     font-weight:normal'>控制寄存器<span lang=EN-US><o:p></o:p></span></span></p>
     </div>
     <![if !mso]></td>
    </tr>
   </table>
   <![endif]></v:textbox>
  <w:wrap type="topAndBottom"/>
 </v:rect><v:rect id="_x0000_s1028" style='position:absolute;left:0;
  text-align:left;margin-left:163.1pt;margin-top:0;width:69.9pt;height:26.1pt;
  z-index:3' o:allowincell="f">
  <v:textbox>
   <![if !mso]>
   <table cellpadding=0 cellspacing=0 width="100%">
    <tr>
     <td><![endif]>
     <div>
     <p class=MsoNormal><span style='font-size:10.5pt;mso-bidi-font-size:10.0pt;
     font-weight:normal'>控制寄存器<span lang=EN-US><o:p></o:p></span></span></p>
     </div>
     <![if !mso]></td>
    </tr>
   </table>
   <![endif]></v:textbox>
  <w:wrap type="topAndBottom"/>
 </v:rect><v:rect id="_x0000_s1029" style='position:absolute;left:0;
  text-align:left;margin-left:163.1pt;margin-top:0;width:69.9pt;height:26.1pt;
  z-index:4' o:allowincell="f">
  <v:textbox>
   <![if !mso]>
   <table cellpadding=0 cellspacing=0 width="100%">
    <tr>
     <td><![endif]>
     <div>
     <p class=MsoNormal><span style='font-size:10.5pt;mso-bidi-font-size:10.0pt;
     font-weight:normal'>控制寄存器<span lang=EN-US><o:p></o:p></span></span></p>
     </div>
     <![if !mso]></td>
    </tr>
   </table>
   <![endif]></v:textbox>
  <w:wrap type="topAndBottom"/>
 </v:rect><![endif]--><![if !vml]><span style='mso-ignore:vglayout'>
 <table cellpadding=0 cellspacing=0 align=left>
  <tr>
   <td width=216 height=0></td>
  </tr>
  <tr>
   <td></td>
   <td><img width=100 height=41 src="11.2.1.files/image002.gif" v:shapes="_x0000_s1027 _x0000_s1028 _x0000_s1029"></td>
  </tr>
 </table>
 </span><![endif]><!--[if gte vml 1]></o:wrapblock><![endif]--><br
style='mso-ignore:vglayout' clear=ALL>
<span lang=EN-US style='font-size:10.5pt;mso-bidi-font-size:10.0pt;font-weight:
normal'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:21.25pt'><span lang=EN-US
style='font-size:10.5pt;mso-bidi-font-size:10.0pt;font-weight:normal'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal align=center style='text-align:center;text-indent:21.25pt;
mso-outline-level:1'><span style='font-size:10.5pt;mso-bidi-font-size:10.0pt;
font-weight:normal'>图<span lang=EN-US>11.4 </span>专用<span lang=EN-US>I/O</span>端口<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='font-size:10.5pt;
mso-bidi-font-size:10.0pt;font-weight:normal'>为了降低成本，通常把同一<span lang=EN-US>I/O</span>端口用于不同目的。例如，某些位描述设备的状态，而其他位指定发布给设备的命令。同理，也可以把同一<span
lang=EN-US>I/O</span>端口用作输入寄存器或输出寄存器。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:10.5pt;mso-bidi-font-size:
10.0pt;font-weight:normal'><span style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:10.5pt;mso-bidi-font-size:10.0pt;
font-weight:normal'>那么如何访问<span lang=EN-US>I/O</span>端口<span lang=EN-US>? in</span>、<span
lang=EN-US>out</span>、<span lang=EN-US>ins</span>和<span lang=EN-US>outs</span>汇编语言指令都可以访问<span
lang=EN-US>I/O</span>端口。<span lang=EN-US>Linux</span>内核中定义了以下辅助函数来简化这种访问：<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:21.25pt;text-indent:-21.25pt;mso-list:
l0 level1 lfo1;tab-stops:list 21.25pt'><![if !supportLists]><span lang=EN-US
style='font-size:10.5pt;mso-bidi-font-size:10.0pt;mso-hansi-font-family:Wingdings;
mso-bidi-font-family:宋体;font-weight:normal'><span style='mso-list:Ignore'>・<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><![endif]><span
lang=EN-US style='font-size:10.5pt;mso-bidi-font-size:10.0pt;font-weight:normal'>inb(
)</span><span style='font-size:10.5pt;mso-bidi-font-size:10.0pt;font-weight:
normal'>、<span lang=EN-US>inw( )</span>、<span lang=EN-US>inl( )</span>函数<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:21.25pt'><span style='font-size:10.5pt;
mso-bidi-font-size:10.0pt;font-weight:normal'>分别从<span lang=EN-US>I/O</span>端口读取<span
lang=EN-US>1</span>、<span lang=EN-US>2</span>或<span lang=EN-US>4</span>个连续字节。后缀“<span
lang=EN-US>b</span>”、“<span lang=EN-US>w</span>”、“<span lang=EN-US>l</span>”分别代表一个字<span
lang=EN-US><span style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>节（<span lang=EN-US>8</span>位）、一个字（<span lang=EN-US>16</span>位）以及一个长整型（<span
lang=EN-US>32</span>位）。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:21.25pt;text-indent:-21.25pt;mso-list:
l4 level1 lfo2;tab-stops:list 21.25pt'><![if !supportLists]><span lang=EN-US
style='font-size:10.5pt;mso-bidi-font-size:10.0pt;mso-hansi-font-family:Wingdings;
mso-bidi-font-family:宋体;font-weight:normal'><span style='mso-list:Ignore'>・<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><![endif]><span
lang=EN-US style='font-size:10.5pt;mso-bidi-font-size:10.0pt;font-weight:normal'>inb_p(
)</span><span style='font-size:10.5pt;mso-bidi-font-size:10.0pt;font-weight:
normal'>、<span lang=EN-US>inw_p( )</span>、<span lang=EN-US>inl_p( )<o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span style='font-size:10.5pt;
mso-bidi-font-size:10.0pt;font-weight:normal'>分别从<span lang=EN-US>I/O</span>端口读取<span
lang=EN-US>1</span>、<span lang=EN-US>2</span>或<span lang=EN-US>4</span>个连续字节，然后执行一条“哑元（<span
lang=EN-US>dummy</span>，即空指令）”指令使<span lang=EN-US>CPU</span>暂停。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:21.25pt;text-indent:-21.25pt;mso-list:
l5 level1 lfo3;tab-stops:list 21.25pt'><![if !supportLists]><span lang=EN-US
style='font-size:10.5pt;mso-bidi-font-size:10.0pt;mso-hansi-font-family:Wingdings;
mso-bidi-font-family:宋体;font-weight:normal'><span style='mso-list:Ignore'>・<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><![endif]><span
lang=EN-US style='font-size:10.5pt;mso-bidi-font-size:10.0pt;font-weight:normal'>outb(
)</span><span style='font-size:10.5pt;mso-bidi-font-size:10.0pt;font-weight:
normal'>、<span lang=EN-US>outw( )</span>、<span lang=EN-US>outl( )<o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:10.5pt;mso-bidi-font-size:
10.0pt;font-weight:normal'><span style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:10.5pt;mso-bidi-font-size:10.0pt;
font-weight:normal'>分别向一个<span lang=EN-US>I/O</span>端口写入<span lang=EN-US>1</span>、<span
lang=EN-US>2</span>或<span lang=EN-US>4</span>个连续字节。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:21.25pt;text-indent:-21.25pt;mso-list:
l3 level1 lfo4;tab-stops:list 21.25pt'><![if !supportLists]><span lang=EN-US
style='font-size:10.5pt;mso-bidi-font-size:10.0pt;mso-hansi-font-family:Wingdings;
mso-bidi-font-family:宋体;font-weight:normal'><span style='mso-list:Ignore'>・<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><![endif]><span
lang=EN-US style='font-size:10.5pt;mso-bidi-font-size:10.0pt;font-weight:normal'>outb_p(
)</span><span style='font-size:10.5pt;mso-bidi-font-size:10.0pt;font-weight:
normal'>、<span lang=EN-US>outw_p( )</span>、<span lang=EN-US>outl_p( )<o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:42.5pt'><span style='font-size:10.5pt;
mso-bidi-font-size:10.0pt;font-weight:normal'>分别向一个<span lang=EN-US>I/O</span>端口写入<span
lang=EN-US>1</span>、<span lang=EN-US>2</span>或<span lang=EN-US>4</span>个连续字节，然后执行一条“哑元”指令使<span
lang=EN-US>CPU</span>暂停。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:21.25pt;text-indent:-21.25pt;mso-list:
l1 level1 lfo5;tab-stops:list 21.25pt'><![if !supportLists]><span lang=EN-US
style='font-size:10.5pt;mso-bidi-font-size:10.0pt;mso-hansi-font-family:Wingdings;
mso-bidi-font-family:宋体;font-weight:normal'><span style='mso-list:Ignore'>・<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><![endif]><span
lang=EN-US style='font-size:10.5pt;mso-bidi-font-size:10.0pt;font-weight:normal'>insb(
)</span><span style='font-size:10.5pt;mso-bidi-font-size:10.0pt;font-weight:
normal'>、<span lang=EN-US>insw( )</span>、<span lang=EN-US>insl( )<o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span style='font-size:10.5pt;
mso-bidi-font-size:10.0pt;font-weight:normal'>分别从<span lang=EN-US>I/O</span>端口读入以<span
lang=EN-US>1</span>、<span lang=EN-US>2</span>或<span lang=EN-US>4</span>个字节为一组的连续字节序列。字节序列的长度由该函数的参数给出。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:21.25pt;text-indent:-21.25pt;mso-list:
l2 level1 lfo6;tab-stops:list 21.25pt'><![if !supportLists]><span lang=EN-US
style='font-size:10.5pt;mso-bidi-font-size:10.0pt;mso-hansi-font-family:Wingdings;
mso-bidi-font-family:宋体;font-weight:normal'><span style='mso-list:Ignore'>・<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><![endif]><span
lang=EN-US style='font-size:10.5pt;mso-bidi-font-size:10.0pt;font-weight:normal'>outsb(
)</span><span style='font-size:10.5pt;mso-bidi-font-size:10.0pt;font-weight:
normal'>、<span lang=EN-US>outsw( )</span>、<span lang=EN-US>outsl( )<o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:10.5pt;mso-bidi-font-size:
10.0pt;font-weight:normal'><span style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:10.5pt;mso-bidi-font-size:10.0pt;
font-weight:normal'>分别向<span lang=EN-US>I/O</span>端口写入以<span lang=EN-US>1</span>、<span
lang=EN-US>2</span>或<span lang=EN-US>4</span>个字节为一组的连续字节序列。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:10.5pt;mso-bidi-font-size:
10.0pt;font-weight:normal'><span style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:10.5pt;mso-bidi-font-size:10.0pt;
font-weight:normal'>虽然访问<span lang=EN-US>I/O</span>端口非常简单，但是检测哪些<span
lang=EN-US>I/O</span>端口已经分配给<span lang=EN-US>I/O</span>设备可能就不这么简单，特别是对基于<span
lang=EN-US>ISA</span>总线的系统来说更是如此。通常，<span lang=EN-US>I/O</span>设备驱动程序为了侦探硬件设备，需要盲目地向某一<span
lang=EN-US>I/O</span>端口写入数据；但是，如果其他硬件设备已经使用这个端口，那么系统就会崩溃。为了防止这种情况的发生，内核必须使用<span
lang=EN-US>iotable</span>表来<span class=GramE>记录分</span>配给每个硬件设备的<span
lang=EN-US>I/O</span>端口。任何设备驱动程序都可以使用下面三个函数：<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-indent:21.25pt'><span lang=EN-US
style='font-size:10.5pt;mso-bidi-font-size:10.0pt;font-weight:normal'>request_<span
class=GramE>region(</span> ) <o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:42.5pt'><span style='font-size:10.5pt;
mso-bidi-font-size:10.0pt;font-weight:normal'>把一个给定区间的<span lang=EN-US>I/O</span>端口分配给一个<span
lang=EN-US>I/O</span>设备。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-indent:21.25pt'><span lang=EN-US
style='font-size:10.5pt;mso-bidi-font-size:10.0pt;font-weight:normal'>check_<span
class=GramE>region(</span> ) <o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:42.5pt'><span style='font-size:10.5pt;
mso-bidi-font-size:10.0pt;font-weight:normal'>检查一个给定区间的<span lang=EN-US>I/O</span>端口是否空闲，或者其中一些是否已经分配给某个<span
lang=EN-US>I/O</span>设备。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-indent:21.25pt'><span lang=EN-US
style='font-size:10.5pt;mso-bidi-font-size:10.0pt;font-weight:normal'>release_<span
class=GramE>region(</span> ) <o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:42.5pt'><span style='font-size:10.5pt;
mso-bidi-font-size:10.0pt;font-weight:normal'>释放以前分配给一个<span lang=EN-US>I/O</span>设备的给定区间的<span
lang=EN-US>I/O</span>端口。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-indent:21.25pt'><span style='font-size:10.5pt;
mso-bidi-font-size:10.0pt;font-weight:normal'>当前分配给<span lang=EN-US>I/O</span>设备的<span
lang=EN-US>I/O</span>地址可以从<span lang=EN-US>/proc/ioports</span>文件中获得。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

</div>

</body>

</html>
